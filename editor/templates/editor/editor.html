{% load staticfiles %}
<div id="standalone-container">
  <div id="toolbar-container">
    <span class="ql-formats">
      <select class="ql-header"></select>
    </span>
    <span class="ql-formats">
      <button class="ql-bold"></button>
      <button class="ql-italic"></button>
      <button class="ql-underline"></button>
      <button class="ql-strike"></button>
    </span>
    <span class="ql-formats">
      <select class="ql-align"></select>
    </span>
    <span class="ql-formats">
      <button class="ql-list" value="ordered"></button>
      <button class="ql-list" value="bullet"></button>
      <button class="ql-indent" value="-1"></button>
      <button class="ql-indent" value="+1"></button>
    </span>
    <span class="ql-formats">
      <select class="ql-color"></select>
      <select class="ql-background"></select>
    </span>
    <span class="ql-formats">
      <button class="ql-blockquote"></button>
    </span>
    <span class="ql-formats">
      <button class="ql-link"></button>
      <button class="ql-image"></button>
      <button class="ql-video"></button>
    </span>
    <span class="ql-formats">
      <button class="ql-clean"></button>
    </span>
  </div>
  <div id="editor-container"></div>
</div>

<script src="{% static 'js/quill.min.js' %}"></script>

<script type="text/javascript">
  var quill = new Quill('#editor-container', {
    modules: {
      toolbar: '#toolbar-container'
    },
    placeholder: 'Compose ansdfdsfsdf epic...',
    theme: 'snow'
  });

  $(document).ready(function () {
    var content = document.getElementById('id_content');
    var qlEditor = document.getElementsByClassName('ql-editor');

    if (content.value === '') {
      // Ести поле textarea пустое, вставлет пробел 
      content.value = ' ';
    } else {
      // При редактировании поста вставляет html
      // с textarea в quill редактор
      $('.ql-editor').html(content.value);
    }

    $("#toolbar-container").stick_in_parent();

  });
  // Передает html разметку с редактора в textarea
  // при отправке формы
  var form = document.querySelector('form');
  form.onsubmit = function () {
    var content = document.getElementById('id_content');
    content.value = quill.root.innerHTML;
  };

</script>